<?xml version="1.0" ?>
<odoo>
	<data>
		<template id="oil_drop_maxed_template" name="Oil Drop Maxed">
			<t t-call="website.layout">
				<t t-set="title">Perfume Journey - Oil Drop Maxed</t>
				<t t-set="additional_title">Scentzania</t>
				<t t-set="font_url" t-value="request.env['ir.config_parameter'].sudo().get_param('gm_scentopia.font_link')"/>
				<t t-set="font_family" t-value="request.env['ir.config_parameter'].sudo().get_param('gm_scentopia.font_name')"/>

				<t t-if="font_url">
						<link rel="stylesheet" t-att-href="font_url"/>
				</t>
				<style>
					body {
						font-family: "<t t-esc="font_family or 'Poppins'"/>" !important;
					}
					.perfume-wrapper {
						min-height: 100vh;
						padding-top: 60px;
						padding-bottom: 20px;
					}
					
					.perfume-card {
						background-color: rgba(255, 255, 255, 0.6);
						backdrop-filter: blur(10px);
						max-width: 500px;
						border-radius: 25px;
					}
					
					/* Category-specific styles */
					.perfume-wrapper.citrus {
						background-image: url('/gm_web/static/src/img/05_perfume_start_01_citrus.png');
						background-color: #FFB347;
						background-size: cover;
						background-position: center;
					}
					
					.perfume-wrapper.fresh {
						background-image: url('/gm_web/static/src/img/05_perfume_start_01_fresh.png');
						background-color: #4FC3F7;
						background-size: cover;
						background-position: center;
					}
					
					.perfume-wrapper.floral {
						background-image: url('/gm_web/static/src/img/05_perfume_start_01_floral.png');
						background-color: #FF6B9D;
						background-size: cover;
						background-position: center;
					}
					
					.perfume-wrapper.woody {
						background-image: url('/gm_web/static/src/img/05_perfume_start_01_woody.png');
						background-color: #8B4513;
						background-size: cover;
						background-position: center;
					}
					
					.perfume-wrapper.oriental {
						background-image: url('/gm_web/static/src/img/05_perfume_start_01_oriental.png');
						background-color: #D32F2F;
						background-size: cover;
						background-position: center;
					}
					
					.perfume-card-container {
						min-height: calc(100vh - 120px);
						margin-bottom: 140px;
						overflow-y: auto;
						overflow-x: hidden;
					}
					
					@media (max-height: 700px) {
						.perfume-card-container {
							min-height: calc(100vh - 400px);
							margin-top: 20px;
							margin-bottom: 200px;
							overflow-y: auto;
							overflow-x: hidden;
						}
					}
					/* Confetti Styles */
					.confetti {
						width: 1rem;
						height: 1rem;
						display: inline-block;
						position: absolute;
						top: -1rem;
						left: 0;
						z-index: 50;
					}
					
					.confetti .rotate {
						animation: driftyRotate 1s infinite both ease-in-out;
						perspective: 1000;
					}
					
					.confetti .askew {
						background: linear-gradient(
							var(--grad-direction, to bottom),
							hsl(63, 100%, 50%) 25%,
							hsl(23, 100%, 50%) 0% 66.667%,
							hsl(43, 100%, 100%) 0% 100%
						);
						transform: skewY(10deg);
						width: 2rem;
						height: 3.2rem;
						animation: drifty 1s infinite alternate both ease-in-out;
						perspective: 1000;
						clip-path: polygon(0% 0%, 100% 0%, 50% 100%);
					}
					
					/* Confetti Animation Delays - Askew */
					.confetti:nth-of-type(7n) .askew {
						animation-delay: -0.6s;
						animation-duration: 2.25s;
					}
					
					.confetti:nth-of-type(7n + 1) .askew {
						animation-delay: -0.879s;
						animation-duration: 3.5s;
					}
					
					.confetti:nth-of-type(7n + 2) .askew {
						animation-delay: -0.11s;
						animation-duration: 1.95s;
					}
					
					.confetti:nth-of-type(7n + 3) .askew {
						animation-delay: -0.246s;
						animation-duration: 0.85s;
					}
					
					.confetti:nth-of-type(7n + 4) .askew {
						animation-delay: -0.43s;
						animation-duration: 2.5s;
					}
					
					.confetti:nth-of-type(7n + 5) .askew {
						animation-delay: -0.56s;
						animation-duration: 1.75s;
					}
					
					.confetti:nth-of-type(7n + 6) .askew {
						animation-delay: -0.76s;
						animation-duration: 1.5s;
					}
					
					/* Confetti Animation Delays - Rotate */
					.confetti:nth-of-type(9n) .rotate {
						animation-duration: 2s;
					}
					
					.confetti:nth-of-type(9n + 1) .rotate {
						animation-duration: 2.3s;
					}
					
					.confetti:nth-of-type(9n + 2) .rotate {
						animation-duration: 1.1s;
					}
					
					.confetti:nth-of-type(9n + 3) .rotate {
						animation-duration: 0.75s;
					}
					
					.confetti:nth-of-type(9n + 4) .rotate {
						animation-duration: 4.3s;
					}
					
					.confetti:nth-of-type(9n + 5) .rotate {
						animation-duration: 3.05s;
					}
					
					.confetti:nth-of-type(9n + 6) .rotate {
						animation-duration: 2.76s;
					}
					
					.confetti:nth-of-type(9n + 7) .rotate {
						animation-duration: 7.6s;
					}
					
					.confetti:nth-of-type(9n + 8) .rotate {
						animation-duration: 1.78s;
					}
					
					/* Confetti Animations */
					@keyframes drifty {
						0% {
							transform: skewY(10deg) translate3d(-250%, 0, 0);
						}
						100% {
							transform: skewY(-12deg) translate3d(250%, 0, 0);
						}
					}
					
					@keyframes driftyRotate {
						0% {
							transform: rotateX(0);
						}
						100% {
							transform: rotateX(359deg);
						}
					}			
					
					/* Bookmarks Type Colors */
					[data-type="bookmarks"] .confetti:nth-child(4n) {
						color: hsl(18, 100%, 50%);
					}
					
					[data-type="bookmarks"] .confetti:nth-child(4n + 1) {
						color: hsl(183, 100%, 50%);
					}
					
					[data-type="bookmarks"] .confetti:nth-child(4n + 2) {
						color: hsl(43, 100%, 50%);
					}
					
					[data-type="bookmarks"] .confetti:nth-child(4n + 3) {
						color: hsl(133, 100%, 90%);
					}
					
					/* Bookmarks Type Styling */
					[data-type="bookmarks"] .confetti .askew {
						background: currentColor;
						width: 1rem;
						height: 2rem;
						clip-path: polygon(evenodd, 0% 0%, 100% 0%, 100% 100%, 50% 90%, 0% 100%);
					}
				</style>
				
				<div style="height: 100vh; position: fixed; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;" t-att-class="'perfume-wrapper ' + category" t-att-data-location="location">
					<div class="confetti-land">
						<t t-foreach="range(100)" t-as="i">
							<div class="confetti"/>
						</t>
					</div>
					
					<div id="perfumeStartWrapper" class="d-flex flex-column position-relative" style="height:100vh">						
						<div class="flex-fill d-flex flex-column justify-content-center align-items-center px-3 position-relative perfume-card-container">
							<div class="perfume-card mx-auto mb-4 p-4 w-100">
								<div class="text-center">
									<p style="color:#2C2C2C !important">
										<strong>Congratulations!</strong>
										<br/>
										You are done with <t t-esc="category.capitalize()"/>
										<br/>
										<br/>
										Tap anywhere to pick your next Zone
									</p>
								</div>
							</div>							
						</div>
					</div>
				</div>
				
				<div class="fixed-bottom d-flex align-items-center justify-content-between p-3" style="z-index: 1000;">
					<div style="width: 40px;"></div>
					<img src="/gm_web/static/src/img/logo.png" class="img-fluid" style="width: 150px; margin-right:30px; margin-top:-20px;" alt="Logo"/>
					<div style="width: 40px;"></div>
				</div>

				<div class="fixed-bottom p-3" style="z-index: 2000; pointer-events: none;">
					<div class="text-end me-2">
						<img t-att-src="'data:%s;base64,%s' % (avatar.get_image_mime('other'), avatar.decode_image(avatar.image))"
							alt="Avatar Image"
							class="img-fluid"
							style="height: 100px;" />
					</div>
				</div>

				<script type="text/javascript">
					<![CDATA[
						document.addEventListener('DOMContentLoaded', function () {
							document.body.addEventListener('click', function () {
								window.location.href = '/perfume-journey/fragrance-selection?location=' + document.querySelector('[data-location]').getAttribute('data-location');
							});
						});

						var confettiPlayers = [];

						function makeItConfetti() {
						var confetti = document.querySelectorAll('.confetti');
						
						if (!confetti[0].animate) {
							return false;
						}

						for (var i = 0, len = confetti.length; i < len; ++i) {
							var candycorn = confetti[i];
							candycorn.innerHTML = '<div class="rotate"><div class="askew"></div></div>';
							var scale = Math.random() * .7 + .3;
							var player = candycorn.animate([
							{ transform: `translate3d(${(i/len*100)}vw,-5vh,0) scale(${scale}) rotate(0turn)`, opacity: scale },
							{ transform: `translate3d(${(i/len*100 + 10)}vw,105vh,0) scale(${scale}) rotate(${ Math.random() > .5 ? '' : '-'}2turn)`, opacity: 1 }
							], {
							duration: Math.random() * 3000 + 4000,
							iterations: Infinity,
							delay: -(Math.random() * 7000)
							});
							
							confettiPlayers.push(player);
						}
						}

						// Set bookmark type and initialize confetti
						document.body.setAttribute('data-type', 'bookmarks');
						makeItConfetti();
						confettiPlayers.forEach(player => player.playbackRate = 2);
					]]>
				</script>
			</t>
		</template>
	</data>
</odoo>
